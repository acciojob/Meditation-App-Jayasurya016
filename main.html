

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mindful Moments</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #2c3e50;
            --accent-color: #3498db;
            --text-color: #ecf0f1;
            --background-color-light: rgba(44, 62, 80, 0.5);
            --background-color-dark: rgba(44, 62, 80, 0.8);
            --border-radius: 10px;
        }

        * {
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: var(--primary-color);
        }

        #app {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        .vid-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .vid-container video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .player-container {
            position: relative;
            z-index: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 20px;
            background: var(--background-color-dark);
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }

        .sound-picker, #time-select {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .sound-picker button, #time-select button {
            background: var(--background-color-light);
            color: var(--text-color);
            border: 2px solid var(--accent-color);
            padding: 12px 25px;
            border-radius: var(--border-radius);
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .sound-picker button:hover, #time-select button:hover {
            background: var(--accent-color);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }
        
        .sound-picker button.active, #time-select button.active {
            background: var(--accent-color);
            color: white;
            border-color: var(--text-color);
            transform: scale(1.05);
        }

        .time-display {
            font-size: 4rem;
            color: var(--text-color);
            font-weight: 700;
            text-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            width: 200px;
            text-align: center;
        }
        
        .play {
            width: 70px;
            height: 70px;
            background: var(--accent-color);
            border: none;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
            transition: transform 0.2s ease;
        }
        
        .play:hover {
            transform: scale(1.05);
        }

        .play svg {
            fill: var(--text-color);
            width: 40px;
            height: 40px;
            transition: transform 0.2s ease;
        }

        .play svg.play-icon {
            transform: translateX(4px);
        }
    </style>
</head>
<body>

<div id="app">
    <!-- Video container -->
    <div class="vid-container">
        <!-- The video will be loaded and played here -->
        <video loop autoplay playsinline muted>
            <source src="video/beach.mp4" type="video/mp4">
        </video>
    </div>

    <!-- Main player controls -->
    <div class="player-container">
        <h1>Mindful Moments</h1>
        <!-- Time selection buttons -->
        <div id="time-select">
            <button id="smaller-mins" data-time="120">2 Mins</button>
            <button id="medium-mins" data-time="300">5 Mins</button>
            <button id="long-mins" data-time="600" class="active">10 Mins</button>
        </div>

        <!-- Time display -->
        <h2 class="time-display">10:00</h2>

        <!-- Play/Pause button -->
        <button class="play">
            <!-- Play icon -->
            <svg class="play-icon" viewBox="0 0 24 24">
                <path d="M8 5v14l11-7z"/>
            </svg>
            <!-- Pause icon -->
            <svg class="pause-icon" viewBox="0 0 24 24" style="display: none;">
                <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
            </svg>
        </button>

        <!-- Sound selection buttons -->
        <div class="sound-picker">
            <button data-sound="beach.mp3" class="active">Beach</button>
            <button data-sound="rain.mp3">Rain</button>
        </div>
        
        <!-- Audio elements -->
        <audio class="song">
            <source src="Sounds/beach.mp3" type="audio/mpeg">
        </audio>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // Get all necessary HTML elements
        const app = document.getElementById('app');
        const song = document.querySelector('.song');
        const video = document.querySelector('.vid-container video');
        const play = document.querySelector('.play');
        const playIcon = document.querySelector('.play-icon');
        const pauseIcon = document.querySelector('.pause-icon');
        const timeDisplay = document.querySelector('.time-display');
        const timeSelect = document.getElementById('time-select');
        const soundPicker = document.querySelector('.sound-picker');

        // Initial state
        let duration = 600; // Default to 10 minutes (600 seconds)
        let countdownTimer = null;

        // Function to update the time display
        const updateDisplay = (time) => {
            const minutes = Math.floor(time / 60);
            const seconds = time % 60;
            timeDisplay.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
        };

        // Function to handle playing and pausing
        const checkPlaying = () => {
            if (song.paused) {
                song.play();
                video.play();
                playIcon.style.display = 'none';
                pauseIcon.style.display = 'block';
                // Start the timer
                if (countdownTimer === null) {
                    startTimer();
                }
            } else {
                song.pause();
                video.pause();
                playIcon.style.display = 'block';
                pauseIcon.style.display = 'none';
                // Stop the timer
                clearInterval(countdownTimer);
                countdownTimer = null;
            }
        };

        // Event listener for the main play/pause button
        play.addEventListener('click', checkPlaying);

        // Event listener for sound selection buttons
        soundPicker.addEventListener('click', (event) => {
            const button = event.target.closest('button');
            if (!button) return;

            // Remove 'active' class from all buttons and add to the clicked one
            soundPicker.querySelectorAll('button').forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');

            const newSound = button.getAttribute('data-sound');
            const newVideo = newSound.replace('mp3', 'mp4');

            // Update audio and video sources
            song.src = `Sounds/${newSound}`;
            video.src = `video/${newVideo}`;
            
            // Reload and play if currently playing
            if (!song.paused) {
                song.load();
                video.load();
                song.play();
                video.play();
            }
        });

        // Event listener for time selection buttons
        timeSelect.addEventListener('click', (event) => {
            const button = event.target.closest('button');
            if (!button) return;
            
            // Remove 'active' class from all buttons and add to the clicked one
            timeSelect.querySelectorAll('button').forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');

            duration = parseInt(button.getAttribute('data-time'));
            updateDisplay(duration);
            
            // If already playing, stop and restart with new time
            if (!song.paused) {
                clearInterval(countdownTimer);
                countdownTimer = null;
                startTimer();
            }
        });

        // The timer function
        const startTimer = () => {
            countdownTimer = setInterval(() => {
                duration--;
                if (duration >= 0) {
                    updateDisplay(duration);
                } else {
                    clearInterval(countdownTimer);
                    countdownTimer = null;
                    song.pause();
                    video.pause();
                    playIcon.style.display = 'block';
                    pauseIcon.style.display = 'none';
                    // Reset to the initial 10-minute state
                    duration = 600;
                    updateDisplay(duration);
                    
                    // Reset button states
                    timeSelect.querySelectorAll('button').forEach(btn => btn.classList.remove('active'));
                    document.getElementById('long-mins').classList.add('active');
                }
            }, 1000);
        };
        
        // Initial setup
        updateDisplay(duration);
    });
</script>

</body>
</html>
