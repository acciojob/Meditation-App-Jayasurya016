<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Meditation App</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background: #111;
      color: white;
      overflow: hidden;
    }

    #app {
      text-align: center;
    }

    .vid-container video {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: -1;
    }

    .player-container {
      position: relative;
      z-index: 1;
    }

    .time-display {
      font-size: 2rem;
      margin: 20px 0;
    }

    .sound-picker button,
    #time-select button,
    .play {
      padding: 10px 20px;
      margin: 10px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1rem;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      transition: background 0.3s;
    }

    button:hover {
      background: rgba(255, 255, 255, 0.5);
    }
  </style>
</head>
<body>
  <div id="app">
    <!-- Video container -->
    <div class="vid-container">
      <video id="video" src="Sounds/beach.mp4" loop></video>
    </div>

    <!-- Player container -->
    <div class="player-container">
      <!-- Timer -->
      <div class="time-display">10:0</div>

      <!-- Play/Pause button -->
      <button class="play">▶️</button>

      <!-- Time selector -->
      <div id="time-select">
        <button id="smaller-mins">2 Min</button>
        <button id="medium-mins">5 Min</button>
        <button id="long-mins">10 Min</button>
      </div>

      <!-- Sound picker -->
      <div class="sound-picker">
        <button id="beach">Beach</button>
        <button id="rain">Rain</button>
      </div>
    </div>
  </div>

  <script>
    const video = document.getElementById("video");
    const playBtn = document.querySelector(".play");
    const timeDisplay = document.querySelector(".time-display");
    const timeButtons = document.querySelectorAll("#time-select button");
    const soundButtons = document.querySelectorAll(".sound-picker button");

    let currentSound = new Audio("Sounds/beach.mp3");
    let fakeDuration = 600; // default 10 min
    let isPlaying = false;
    let timerInterval;

    // Play & Pause functionality
    playBtn.addEventListener("click", () => {
      if (!isPlaying) {
        currentSound.play();
        video.play();
        startTimer();
        playBtn.textContent = "⏸️";
        isPlaying = true;
      } else {
        currentSound.pause();
        video.pause();
        clearInterval(timerInterval);
        playBtn.textContent = "▶️";
        isPlaying = false;
      }
    });

    // Time selection
    timeButtons.forEach((btn) => {
      btn.addEventListener("click", function () {
        if (this.id === "smaller-mins") fakeDuration = 120;
        if (this.id === "medium-mins") fakeDuration = 300;
        if (this.id === "long-mins") fakeDuration = 600;

        updateTimeDisplay(fakeDuration);
      });
    });

    // Sound selection
    soundButtons.forEach((btn) => {
      btn.addEventListener("click", function () {
        currentSound.pause();
        if (this.id === "beach") {
          currentSound = new Audio("Sounds/beach.mp3");
          video.src = "Sounds/beach.mp4";
        }
        if (this.id === "rain") {
          currentSound = new Audio("Sounds/rain.mp3");
          video.src = "Sounds/rain.mp4";
        }
        if (isPlaying) {
          currentSound.play();
          video.play();
        }
      });
    });

    // Timer function
    function startTimer() {
      let remaining = fakeDuration;
      updateTimeDisplay(remaining);

      timerInterval = setInterval(() => {
        remaining--;
        updateTimeDisplay(remaining);

        if (remaining <= 0) {
          clearInterval(timerInterval);
          currentSound.pause();
          video.pause();
          playBtn.textContent = "▶️";
          isPlaying = false;
        }
      }, 1000);
    }

    // Update display
    function updateTimeDisplay(seconds) {
      let mins = Math.floor(seconds / 60);
      let secs = seconds % 60;
      timeDisplay.textContent = `${mins}:${secs}`;
    }
  </script>
</body>
</html>
